var GameObjManager=Class.extend({init:function(){var e=1200;var t=window.innerHeight;var n=e/800;var r=t/480;var i=e/t;var s=Math.min(n,r);if(i>=1.77&&i<=1.79){this.WindowWidth=e;this.WindowHeight=t}else{var o=800*s;var u=480*s;if(o<800||u<480){this.WindowWidth=800;this.WindowHeight=480}else{this.WindowWidth=800*s;this.WindowHeight=480*s}}this.DefaultFont="bold 2em monospace";this.Level=null;this.Group="index";this.Buttons=[];this.PlayerVersion=4;this.CurrentPlayer={};this.AudioTheme=$("#audio-theme")[0]},GetPlayers:function(){var e=this.GetOption("players");return e===null?[]:JSON.parse(e)},SavePlayer:function(e){var t=this.GetPlayers();var n=t.length;if(n>0){for(var r=0;r<n;r++){if(e.name===t[r].name){t[r]=e}}}this.CurrentPlayer=e;this.SetOption("players",JSON.stringify(t))},GetPlayer:function(e){var t=this.GetPlayers();var n=null;var r=t.length;for(var i=0;i<r;i++){if(e===t[i].name){if(t[i].version!==this.PlayerVersion){n=this.UpdatePlayer(t[i])}else{n=t[i]}}}if(n===null){n=this.NewPlayer(e);t.push(n)}n.sprite.y=this.WindowHeight-175;n.sprite.startY=n.sprite.y;this.CurrentPlayer=n;this.SetOption("players",JSON.stringify(t));return n},NewPlayer:function(e){var t={id:GUID(),name:e,score:0,level:1,health:200,sprite:{imgSrc:"images/sprites/player2.png",imgSrcInvert:"images/sprites/player_invert.png",width:125,height:150,startX:60,startY:this.WindowHeight-175,x:60,y:this.WindowHeight-175},version:4};return t},UpdatePlayer:function(e){var t=this.PlayerVersion;for(var n=e.version;n<=t;n++){switch(n){case 3:e.sprite.imgSrc="images/sprites/player2.png";break;case 4:e.sprite.startX=60;break}}return e},GetBackgrounds:function(e){var t=[];var n=2382;var r=e.LevelNumber;for(var i=0;i<r;i++){t.push({imgSrc0:e.LevelBackground0,imgSrc1:e.LevelBackground1,imgSrc2:e.LevelBackground2,startX0:i>0?i*n:i,startX1:i>0?i*n:i,startX2:i>0?i*n:i,x0:i>0?i*n:i,x1:i>0?i*n:i,x2:i>0?i*n:i,y:25,width0:r>1?r*n:n,width1:n*2,width2:n*2,height:this.WindowHeight})}return t},NewShot:function(){return{id:null,x:this.CurrentPlayer.sprite.x+this.CurrentPlayer.sprite.width,y:this.CurrentPlayer.sprite.y+62,width:50,height:5,fillStyle:"rgb(0,255,255)",damage:10,speed:100}},NewEnemyShot:function(e){return{id:null,x:e.x-40,y:e.y+52,width:50,height:5,fillStyle:"rgb(0,255,255)",damage:e.damage}},NewPowerUp:function(e){var t=null;return t},GetLevel:function(e){var t=[];for(var n in e.LevelTiles){tile=e.LevelTiles[n];if(tile!==null){switch(tile.type){case"enemy":var r=new Enemy(tile.enemyType);r.startX=tile.x;r.x=tile.x;r.startY=tile.y;r.y=tile.y;t.push(r);break;case"powerup":var i=new PowerUp(tile.powerUpType);i.startX=tile.x;i.x=tile.x;i.startY=tile.y;i.y=tile.y;t.push(i);break;case"boss":var s=new Boss(tile.enemyType);s.startX=tile.x;s.x=tile.x;s.startY=tile.y;s.y=tile.y;t.push(s);break;case"tardis":var i=new PowerUp(tile.powerUpType);i.startX=tile.x;i.x=tile.x;i.startY=tile.y;i.y=tile.y;t.push(i);break;case"doctor":var o=new PowerUp(tile.powerUpType);o.startX=tile.x;o.x=tile.x;o.startY=tile.y;o.y=tile.y;t.push(o);break}}}return t},SetOption:function(e,t){localStorage.setItem(e,t)},GetOption:function(e){var t=localStorage.getItem(e);return t===undefined||t===null?null:t}})